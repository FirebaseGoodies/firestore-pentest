import { Component, OnInit, Input } from '@angular/core';
import { Router } from '@angular/router';

export interface Step {
  title: string,
  icon: string
}

@Component({
  selector: 'app-stepper',
  templateUrl: './stepper.component.html',
  styleUrls: ['./stepper.component.scss']
})
export class StepperComponent implements OnInit {

  @Input() currentIndex: number = 0;
  @Input() isLoading: boolean = false;
  @Input() disableNavigation: boolean = false;
  steps: Step[] = [
    {
      title: 'Setup',
      icon: 'setting'
    },
    {
      title: 'Start',
      icon: 'security-scan'
    }
  ];

  constructor(
    private router: Router
  ) { }

  ngOnInit(): void {
  }

  onIndexChange(index: number) {
    this.goto(index);
  }

  private goto(index: number) {
    if (!this.isLoading && !this.disableNavigation) {
      switch(index) {
        case 0:
          this.currentIndex = 0;
          this.router.navigate(['setup']);
          break;
        case 1:
          this.currentIndex = 1;
          this.router.navigate(['start']);
          break;
      }
    }
  }

}
